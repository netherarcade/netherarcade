<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click the Star</title>
  <style>
    body {
      background: #fff;
      color: #111;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav {
      background: #f4f4f4;
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }
    nav a {
      color: #c00;
      margin-right: 15px;
      text-decoration: none;
      font-weight: bold;
    }
    .container {
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 20px;
    }
    .panel {
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      width: 30%;
      box-shadow: 0px 0px 5px rgba(0,0,0,0.1);
    }
    h2 {
      color: #c00;
    }
    button {
      background: #c00;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #999;
      cursor: not-allowed;
    }
    .shop-star {
      color: gold;
      font-size: 22px;
    }
    .toggle-on {
      background: green;
    }
    .toggle-off {
      background: red;
    }
    #starIcon {
      font-size: 60px;
      cursor: pointer;
      color: red;
    }
    .achievements {
      font-size: 13px;
      margin-top: 10px;
    }
    .achievement {
      margin-bottom: 5px;
      padding: 5px;
      border-radius: 5px;
      background: #eee;
    }
  </style>
</head>
<body>

<nav>
  <a href="#">Home</a>
  <a href="#">Team</a>
  <a href="#">Mini-Game</a>
  <a href="#">Socials</a>
</nav>

<div class="container">

  <!-- Shop Panel -->
  <div class="panel" id="shopPanel">
    <h2><span class="shop-star">‚≠ê</span> Shop</h2>
    <p id="starCount">Stars: 0</p>
    <button onclick="tradeForStar()">Trade 50T ‚Üí +1 Star</button>
    <div id="starUpgrades"></div>
    <div id="autoPrestigeToggle"></div>
  </div>

  <!-- Main Game Panel -->
  <div class="panel" style="width: 35%; text-align: center;">
    <h2>Click the Star</h2>
    <p id="count">Count: 0</p>
    <p id="stats"></p>
    <div id="starIcon" onclick="clickStar()">‚≠ê</div>
    <br>
    <button onclick="saveGame()">üíæ Save</button>
    <button onclick="hardReset()">‚ùå Hard Reset</button>
    <button onclick="prestige()">üåü Prestige</button>
    <p style="font-size:12px; color:#555; margin-top:10px;">
      ‚Ä¢ Achievements are trophies (no stat boost).<br>
      ‚Ä¢ Upgrades scale in price as you buy more.<br>
      ‚Ä¢ Your progress auto-saves often.<br>
      ‚Ä¢ Prestige resets progress but doubles idle/sec permanently.<br>
      ‚Ä¢ Reach Infinity to unlock Endless cosmetic rewards.<br>
    </p>
    <div class="achievements" id="achievements"></div>
  </div>

  <!-- Upgrades Panel -->
  <div class="panel">
    <h2>Upgrades</h2>
    <div id="upgradeList"></div>
  </div>

</div>

<script>
  // ================= Number Formatter =================
  function formatNumber(num) {
    if (num < 1000) return num.toString();
    let units = ["", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "Dc"];
    let unitIndex = 0;
    while (num >= 1000 && unitIndex < units.length - 1) {
      num /= 1000;
      unitIndex++;
    }
    return num.toFixed(2) + units[unitIndex];
  }

  // ================= Game State =================
  let count = 0;
  let clickValue = 1;
  let idleValue = 0;
  let prestigeMultiplier = 1;
  let stars = 0;
  let autoPrestigeUnlocked = false;
  let autoPrestigeEnabled = false;
  let achievementsUnlocked = [];

  // Normal upgrades
  let upgrades = [
    { name: "+0.5 / click", baseCost: 20, cost: 20, value: 0.5, type: "click", amount: 0 },
    { name: "+1 / click", baseCost: 150, cost: 150, value: 1, type: "click", amount: 0 },
    { name: "+1 / sec", baseCost: 100, cost: 100, value: 1, type: "idle", amount: 0 },
    { name: "+5 / sec", baseCost: 500, cost: 500, value: 5, type: "idle", amount: 0 },
    { name: "Burst x2", baseCost: 1000, cost: 1000, value: 2, type: "burst", amount: 0 }
  ];

  // Star Shop upgrades
  let shopUpgrades = [
    { name: "Guiding Light", cost: 2, owned: 0, desc: "Start with +Idle/sec √ó Prestige multiplier." },
    { name: "Celestial Clicks", cost: 5, owned: 0, desc: "Permanently double click value." },
    { name: "Ascendant Cycle", cost: 10, owned: 0, desc: "Unlock auto prestige toggle." },
    { name: "Efficient Universe", cost: 15, owned: 0, desc: "5% cheaper upgrades." }
  ];

  // Achievements
  let achievements = [
    { id: 1, name: "First Click", condition: () => count >= 1 },
    { id: 2, name: "Millionaire", condition: () => count >= 1e6 },
    { id: 3, name: "Star Trader", condition: () => stars >= 1 },
    { id: 4, name: "Prestiger", condition: () => prestigeMultiplier > 1 }
  ];

  // ================= Game Functions =================
  function clickStar() {
    count += clickValue;
    updateDisplay();
    checkAchievements();
  }

  function buyUpgrade(index) {
    let u = upgrades[index];
    if (count >= u.cost) {
      count -= u.cost;
      u.amount++;
      if (u.type === "click") clickValue += u.value;
      if (u.type === "idle") idleValue += u.value;
      if (u.type === "burst") clickValue *= u.value;
      u.cost = Math.floor(u.cost * 1.5); // Price scaling
      renderUpgrades();
      updateDisplay();
    }
  }

  function tradeForStar() {
    let tradeCost = 50000000000000; // 50T
    if (count >= tradeCost) {
      count -= tradeCost;
      stars++;
      renderShop();
      updateDisplay();
    }
  }

  function buyStarUpgrade(index) {
    let u = shopUpgrades[index];
    if (stars >= u.cost && u.owned === 0) {
      stars -= u.cost;
      u.owned = 1;
      if (u.name === "Celestial Clicks") clickValue *= 2;
      if (u.name === "Ascendant Cycle") {
        autoPrestigeUnlocked = true;
        renderAutoPrestigeToggle();
      }
      renderShop();
      updateDisplay();
    }
  }

  function prestige() {
    if (count >= 1e6) {
      prestigeMultiplier *= 2;
      count = 0;
      clickValue = 1;
      idleValue = 0;
      upgrades.forEach(u => {
        u.amount = 0;
        u.cost = u.baseCost;
      });
      renderUpgrades();
      updateDisplay();
    }
  }

  // ================= Auto Prestige =================
  function renderAutoPrestigeToggle() {
    if (autoPrestigeUnlocked) {
      document.getElementById("autoPrestigeToggle").innerHTML =
        `<p>Auto Prestige: 
        <button onclick="toggleAutoPrestige()" class="${autoPrestigeEnabled ? 'toggle-on' : 'toggle-off'}">
          ${autoPrestigeEnabled ? "ON" : "OFF"}
        </button></p>`;
    }
  }

  function toggleAutoPrestige() {
    autoPrestigeEnabled = !autoPrestigeEnabled;
    renderAutoPrestigeToggle();
  }

  // ================= Achievements =================
  function checkAchievements() {
    achievements.forEach(a => {
      if (!achievementsUnlocked.includes(a.id) && a.condition()) {
        achievementsUnlocked.push(a.id);
        renderAchievements();
      }
    });
  }

  function renderAchievements() {
    let html = "";
    achievementsUnlocked.forEach(id => {
      let a = achievements.find(x => x.id === id);
      html += `<div class="achievement">üèÜ ${a.name}</div>`;
    });
    document.getElementById("achievements").innerHTML = html;
  }

  // ================= Rendering =================
  function renderUpgrades() {
    let html = "";
    upgrades.forEach((u, i) => {
      html += `<div style="margin-bottom:10px;">
        <b>${u.name}</b> (Owned: ${u.amount})<br>
        <small>${u.type === "click" ? "Click" : u.type === "idle" ? "Idle" : "Special"} upgrade.</small><br>
        ${formatNumber(u.cost)} <button onclick="buyUpgrade(${i})">Buy</button>
      </div>`;
    });
    document.getElementById("upgradeList").innerHTML = html;
  }

  function renderShop() {
    document.getElementById("starCount").innerText = "Stars: " + stars;
    let html = "";
    shopUpgrades.forEach((u, i) => {
      html += `<div style="margin-bottom:10px;">
        <b>${u.name}</b> (Owned: ${u.owned})<br>
        <small>${u.desc}</small><br>
        ${u.cost}‚≠ê <button onclick="buyStarUpgrade(${i})" ${u.owned ? "disabled" : ""}>Buy</button>
      </div>`;
    });
    document.getElementById("starUpgrades").innerHTML = html;
  }

  function updateDisplay() {
    document.getElementById("count").innerText = "Count: " + formatNumber(count);
    document.getElementById("stats").innerText =
      `Click Value: ${formatNumber(clickValue)} | Idle: ${formatNumber(idleValue)}/sec | Prestige Multiplier: ${formatNumber(prestigeMultiplier)}x`;
    renderShop();
    renderAutoPrestigeToggle();
  }

  // ================= Game Loop =================
  setInterval(() => {
    count += idleValue;
    if (autoPrestigeEnabled && count >= 1e6) {
      prestige();
    }
    updateDisplay();
    checkAchievements();
  }, 1000);

  // ================= Save / Load =================
  function saveGame() {
    let save = {
      count, clickValue, idleValue, prestigeMultiplier,
      stars, upgrades, shopUpgrades,
      autoPrestigeUnlocked, autoPrestigeEnabled,
      achievementsUnlocked
    };
    localStorage.setItem("starClickerSave", JSON.stringify(save));
  }

  function loadGame() {
    let save = JSON.parse(localStorage.getItem("starClickerSave"));
    if (save) {
      count = save.count;
      clickValue = save.clickValue;
      idleValue = save.idleValue;
      prestigeMultiplier = save.prestigeMultiplier;
      stars = save.stars || 0;
      upgrades = save.upgrades || upgrades;
      shopUpgrades = save.shopUpgrades || shopUpgrades;
      autoPrestigeUnlocked = save.autoPrestigeUnlocked || false;
      autoPrestigeEnabled = save.autoPrestigeEnabled || false;
      achievementsUnlocked = save.achievementsUnlocked || [];
    }
    renderUpgrades();
    renderShop();
    renderAutoPrestigeToggle();
    renderAchievements();
    updateDisplay();
  }

  function hardReset() {
    if (confirm("Are you sure? This will wipe everything!")) {
      localStorage.removeItem("starClickerSave");
      location.reload();
    }
  }

  // ================= Dev Code =================
  document.addEventListener("keydown", function(e) {
    if (e.key.toLowerCase() === "p") {
      count += 1e15;
      updateDisplay();
    }
  });

  // ================= Init =================
  loadGame();
  setInterval(saveGame, 10000); // Auto save
</script>

</body>
</html>
