<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click the Star</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0d0d0d;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
    }
    nav {
      background: #111;
      padding: 10px 20px;
      display: flex;
      gap: 20px;
    }
    nav a {
      color: #e0e0e0;
      text-decoration: none;
    }
    nav a:hover {
      color: #00ff99;
    }
    .main {
      display: flex;
      gap: 20px;
      padding: 20px;
    }
    .panel {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 12px;
      flex: 1;
      box-shadow: 0 0 12px rgba(0,0,0,0.5);
    }
    h2 {
      color: #fff;
      text-shadow: 0 0 6px #00ff99;
    }
    .center {
      flex: 2;
      text-align: center;
    }
    #starBtn {
      font-size: 60px;
      color: #ff3333;
      cursor: pointer;
      transition: transform 0.1s;
      margin: 20px 0;
    }
    #starBtn:active {
      transform: scale(0.9);
    }
    .stats {
      margin: 10px 0;
    }
    .btn {
      background: #111;
      margin: 5px;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      border: none;
      font-weight: bold;
    }
    .saveBtn {
      background: #222;
      color: #00ff99;
    }
    .resetBtn {
      background: #222;
      color: #ff5555;
    }
    .prestigeBtn {
      background: #222;
      color: #ffcc00;
    }
    .shopBtn {
      background: #333;
      color: #00aaff;
    }
    .toggleBtn {
      background: #333;
      color: #ffaa00;
    }
    .upgrade {
      background: #111;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .upgrade button {
      background: #ff3333;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .upgrade button:hover {
      background: #ff5555;
    }
    .achievement {
      background: #111;
      margin: 6px 0;
      padding: 8px;
      border-radius: 6px;
    }
    .locked {
      opacity: 0.4;
    }
    .unlocked {
      color: #00ff99;
      text-shadow: 0 0 6px #00ff99;
    }
    .notes {
      margin-top: 20px;
      font-size: 12px;
      color: #aaa;
      text-align: left;
    }
  </style>
</head>
<body>

  <nav>
    <a href="#">Home</a>
    <a href="#">Team</a>
    <a href="#">Mini-Game</a>
    <a href="#">Socials</a>
  </nav>

  <div class="main">
    <!-- Shop Panel -->
    <div class="panel" style="flex:0.6;">
      <h2>‚≠ê Shop</h2>
      <p>Stars: <span id="starCount">0</span></p>
      <button class="btn shopBtn" onclick="tradeStars()">Trade 50T ‚Üí +1 Star</button>
      <div id="starUpgrades"></div>
      <div id="autoPrestigeToggle" style="margin-top:10px; display:none;">
        <button class="btn toggleBtn" onclick="toggleAutoPrestige()">Auto Prestige: <span id="autoPrestigeState">OFF</span></button>
      </div>
    </div>

    <!-- Center Panel -->
    <div class="panel center">
      <h2>Click the Star</h2>
      <div class="stats">
        <p><b>Count:</b> <span id="score">0</span></p>
        <p>Click Value: <span id="clickValue">1</span> | Idle: <span id="idleValue">0</span>/sec | Prestige Multiplier: <span id="prestigeMult">1x</span></p>
      </div>
      <div id="starBtn">‚òÖ</div>
      <button class="btn saveBtn" onclick="saveGame()">üíæ Save</button>
      <button class="btn resetBtn" onclick="hardReset()">üóë Hard Reset</button>
      <button class="btn prestigeBtn" id="prestigeBtn" style="display:none;" onclick="prestige()">üåü Prestige</button>
      <div class="notes">
        <p>‚Ä¢ Achievements are trophies (no stat boost).</p>
        <p>‚Ä¢ Upgrades scale in price as you buy more.</p>
        <p>‚Ä¢ Your progress auto-saves often (you can also press Save).</p>
        <p>‚Ä¢ Prestige resets progress but doubles your idle/sec permanently.</p>
        <p>‚Ä¢ Reach Infinity to unlock a hidden cosmetic via Endless Restart.</p>
      </div>
    </div>

    <!-- Upgrades Panel -->
    <div class="panel">
      <h2>Upgrades</h2>
      <div id="upgrades"></div>
    </div>

    <!-- Achievements Panel -->
    <div class="panel">
      <h2>Achievements</h2>
      <div id="achievements"></div>
    </div>
  </div>

<script>
  let score = 0;
  let clickValue = 1;
  let cps = 0;
  let prestigeMult = 1;
  let stars = 0;
  let autoPrestige = false;

  let upgrades = [
    { id: "click1", name: "+0.5 / click", cost: 10, value: 0.5, type: "click", owned: 0, desc: "Practice makes perfect." },
    { id: "click2", name: "+1 / click", cost: 50, value: 1, type: "click", owned: 0, desc: "Heavier fingertips." },
    { id: "cps1", name: "+1 / sec", cost: 100, value: 1, type: "cps", owned: 0, desc: "Little helpers." },
    { id: "cps5", name: "+5 / sec", cost: 500, value: 5, type: "cps", owned: 0, desc: "Bigger crew." },
    { id: "burst", name: "Burst x2", cost: 1000, value: 2, type: "burst", owned: 0, desc: "Permanently doubles click value (stackable)." }
  ];

  let achievements = [
    { id: "first", name: "First Click", condition: () => score >= 1 },
    { id: "ten", name: "Ten Up", condition: () => score >= 10 },
    { id: "hundred", name: "Triple Digits", condition: () => score >= 100 },
    { id: "thousand", name: "1,000!", condition: () => score >= 1000 },
    { id: "auto", name: "Automation", condition: () => cps >= 10 },
    { id: "banked", name: "5,000 Banked", condition: () => score >= 5000 },
    { id: "lotofones", name: "A Lot of Ones", condition: () => score >= 111111 },
    { id: "moneymoney", name: "Money Money", condition: () => score >= 500000 }
  ];

  let starUpgrades = [
    { id: "startIdle", name: "Guiding Light", cost: [2,4,8], owned: 0, max: 3, desc: "Start with +Idle/sec √ó Prestige multiplier." },
    { id: "doubleClick", name: "Celestial Clicks", cost: [5], owned: 0, max: 1, desc: "Permanently double click value." },
    { id: "autoPrestige", name: "Ascendant Cycle", cost: [10], owned: 0, max: 1, desc: "Unlock auto prestige toggle." },
    { id: "priceCut", name: "Efficient Universe", cost: [15], owned: 0, max: 1, desc: "5% cheaper upgrades." }
  ];

  // Load save
  if (localStorage.getItem("starSave")) {
    let save = JSON.parse(localStorage.getItem("starSave"));
    score = save.score;
    clickValue = save.clickValue;
    cps = save.cps;
    upgrades = save.upgrades;
    prestigeMult = save.prestigeMult || 1;
    stars = save.stars || 0;
    starUpgrades = save.starUpgrades || starUpgrades;
    autoPrestige = save.autoPrestige || false;
  }

  // Shop Trade
  function tradeStars() {
    if (score >= 5e13) { // 50 trillion
      score -= 5e13;
      stars++;
      updateDisplay();
      saveGame();
    }
  }

  // Buy Star Upgrade
  function buyStarUpgrade(id) {
    let u = starUpgrades.find(x => x.id === id);
    if (!u) return;
    let cost = u.cost[u.owned] || null;
    if (cost && stars >= cost && u.owned < u.max) {
      stars -= cost;
      u.owned++;
      if (u.id === "doubleClick") clickValue *= 2;
      if (u.id === "priceCut") upgrades.forEach(up => up.cost = Math.floor(up.cost * 0.95));
      if (u.id === "autoPrestige") document.getElementById("autoPrestigeToggle").style.display = "block";
      updateDisplay();
      saveGame();
    }
  }

  // Toggle Auto Prestige
  function toggleAutoPrestige() {
    autoPrestige = !autoPrestige;
    document.getElementById("autoPrestigeState").textContent = autoPrestige ? "ON" : "OFF";
    saveGame();
  }

  // Render Shop
  function renderStarUpgrades() {
    let container = document.getElementById("starUpgrades");
    container.innerHTML = "";
    starUpgrades.forEach(u => {
      let nextCost = u.cost[u.owned] || null;
      let div = document.createElement("div");
      div.className = "upgrade";
      div.innerHTML = `<div><b>${u.name}</b> (Owned: ${u.owned})<br><small>${u.desc}</small></div>
                       <div>${nextCost ? nextCost + "‚òÖ" : "Max"} 
                       ${nextCost ? "<button>Buy</button>" : ""}</div>`;
      if (nextCost) div.querySelector("button").onclick = () => buyStarUpgrade(u.id);
      container.appendChild(div);
    });
    if (starUpgrades.find(u => u.id === "autoPrestige").owned > 0) {
      document.getElementById("autoPrestigeToggle").style.display = "block";
      document.getElementById("autoPrestigeState").textContent = autoPrestige ? "ON" : "OFF";
    }
  }

  // Render upgrades
  function renderUpgrades() {
    let container = document.getElementById("upgrades");
    container.innerHTML = "";
    upgrades.forEach(u => {
      let div = document.createElement("div");
      div.className = "upgrade";
      div.innerHTML = `<div><b>${u.name}</b> (Owned: ${u.owned})<br><small>${u.desc}</small></div><div>${u.cost} <button>Buy</button></div>`;
      div.querySelector("button").onclick = () => buyUpgrade(u.id);
      container.appendChild(div);
    });
  }

  // Render achievements
  function renderAchievements() {
    let container = document.getElementById("achievements");
    container.innerHTML = "";
    achievements.forEach(a => {
      let unlocked = a.condition();
      let div = document.createElement("div");
      div.className = "achievement " + (unlocked ? "unlocked" : "locked");
      div.textContent = a.name;
      container.appendChild(div);
    });
  }

  document.getElementById("starBtn").addEventListener("click", () => {
    score += clickValue;
    updateDisplay();
    saveGame();
  });

  function buyUpgrade(id) {
    let u = upgrades.find(x => x.id === id);
    if (score >= u.cost) {
      score -= u.cost;
      u.owned++;
      if (u.type === "click") clickValue += u.value;
      if (u.type === "cps") cps += u.value;
      if (u.type === "burst") clickValue *= u.value;
      u.cost = Math.floor(u.cost * 1.5);
      updateDisplay();
      saveGame();
    }
  }

  function updateDisplay() {
    document.getElementById("score").textContent = score.toFixed(1);
    document.getElementById("clickValue").textContent = clickValue;
    document.getElementById("idleValue").textContent = cps * prestigeMult;
    document.getElementById("prestigeMult").textContent = prestigeMult + "x";
    document.getElementById("starCount").textContent = stars;
    document.getElementById("prestigeBtn").style.display = score >= 100000 ? "inline-block" : "none";
    renderUpgrades();
    renderAchievements();
    renderStarUpgrades();
  }

  setInterval(() => {
    score += cps * prestigeMult;
    if (autoPrestige && score >= 100000) prestige();
    updateDisplay();
    saveGame();
  }, 1000);

  function saveGame() {
    localStorage.setItem("starSave", JSON.stringify({ score, clickValue, cps, upgrades, prestigeMult, stars, starUpgrades, autoPrestige }));
  }

  function hardReset() {
    if (confirm("Are you sure you want to reset?")) {
      score = 0;
      clickValue = 1;
      cps = 0;
      upgrades.forEach(u => { u.owned = 0; u.cost = Math.max(10, Math.floor(u.cost / Math.pow(1.5, u.owned))); });
      stars = 0;
      starUpgrades.forEach(u => u.owned = 0);
      autoPrestige = false;
      saveGame();
      updateDisplay();
    }
  }

  function prestige() {
    if (score >= 100000) {
      score = 0;
      clickValue = 1;
      cps = 0;
      upgrades.forEach(u => { u.owned = 0; u.cost = Math.max(10, Math.floor(u.cost / Math.pow(1.5, u.owned))); });
      prestigeMult *= 2;
      // Apply Guiding Light
      let startIdle = starUpgrades.find(u => u.id === "startIdle").owned;
      if (startIdle > 0) cps += startIdle * prestigeMult;
      saveGame();
      updateDisplay();
    }
  }

  updateDisplay();
</script>

</body>
</html>
