<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click the Star</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav {
      background: #000;
      padding: 10px;
    }
    nav a {
      color: #0f0;
      margin-right: 15px;
      text-decoration: none;
    }
    .container {
      display: flex;
      justify-content: space-between;
      padding: 20px;
    }
    .panel {
      background: #1a1a1a;
      border-radius: 10px;
      padding: 15px;
      width: 23%;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
    }
    h2 {
      color: #0f0;
      margin-top: 0;
    }
    button {
      background: #c00;
      color: #fff;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #444;
      cursor: not-allowed;
    }
    .big-star {
      font-size: 40px;
      cursor: pointer;
    }
    .shop-star {
      color: gold;
      font-size: 20px;
    }
    .toggle-on {
      background: green;
    }
    .toggle-off {
      background: red;
    }
    small {
      color: #aaa;
    }
    .achievement {
      padding: 5px;
      margin-bottom: 5px;
      background: #222;
      border-radius: 5px;
      color: #777;
    }
    .achievement.unlocked {
      color: #0f0;
      font-weight: bold;
    }
  </style>
</head>
<body>

<nav>
  <a href="#">Home</a>
  <a href="#">Team</a>
  <a href="#">Mini-Game</a>
  <a href="#">Socials</a>
</nav>

<div class="container">

  <!-- Shop Panel -->
  <div class="panel" id="shopPanel">
    <h2><span class="shop-star">⭐</span> Shop</h2>
    <p id="starCount">Stars: 0</p>
    <button onclick="tradeForStar()">Trade 50T → +1 Star</button>
    <div id="starUpgrades"></div>
    <div id="autoPrestigeToggle"></div>
  </div>

  <!-- Main Game Panel -->
  <div class="panel" style="width: 30%;">
    <h2>Click the Star</h2>
    <p id="count">Count: 0</p>
    <p id="stats"></p>
    <div class="big-star" onclick="clickStar()">⭐</div>
    <br>
    <button onclick="saveGame()">Save</button>
    <button onclick="hardReset()">Hard Reset</button>
    <button onclick="prestige()">Prestige</button>
    <p style="font-size:12px; color:#aaa;">
      • Achievements are trophies (no stat boost).<br>
      • Upgrades scale in price as you buy more.<br>
      • Your progress auto-saves often.<br>
      • Prestige resets prices, click value and idle, but doubles your prestige multiplier.<br>
      • Stars persist forever (not reset on prestige).<br>
      • Reach Infinity to unlock Endless rewards.<br>
    </p>
  </div>

  <!-- Upgrades Panel -->
  <div class="panel">
    <h2>Upgrades</h2>
    <div id="upgradeList"></div>
  </div>

  <!-- Achievements Panel -->
  <div class="panel">
    <h2>Achievements</h2>
    <div id="achievementsList"></div>
  </div>

</div>

<script>
  // ================= Number Formatter =================
  function formatNumber(num) {
    if (num < 1000) return num.toString();
    let units = ["", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "Dc"];
    let unitIndex = 0;
    while (num >= 1000 && unitIndex < units.length - 1) {
      num /= 1000;
      unitIndex++;
    }
    return num.toFixed(2) + units[unitIndex];
  }

  // ================= Game State =================
  let count = 0;
  let clickValue = 1;
  let idleValue = 0;
  let prestigeMultiplier = 1;
  let stars = 0;
  let autoPrestigeUnlocked = false;
  let autoPrestigeEnabled = false;

  // Normal upgrades
  let upgrades = [
    { name: "+0.5 / click", baseCost: 20, cost: 20, value: 0.5, type: "click", amount: 0, desc: "Practice makes perfect." },
    { name: "+1 / click", baseCost: 100, cost: 100, value: 1, type: "click", amount: 0, desc: "Heavier fingertips." },
    { name: "+1 / sec", baseCost: 25, cost: 25, value: 1, type: "idle", amount: 0, desc: "Little helpers." },
    { name: "+5 / sec", baseCost: 125, cost: 125, value: 5, type: "idle", amount: 0, desc: "Bigger crew." },
    { name: "Burst x2", baseCost: 1000, cost: 1000, value: 2, type: "burst", amount: 0, desc: "Permanently doubles click value (stackable)." }
  ];

  // Star Shop upgrades
  let shopUpgrades = [
    { name: "Guiding Light", cost: 2, owned: 0, desc: "Start with +Idle/sec × Prestige multiplier." },
    { name: "Celestial Clicks", cost: 5, owned: 0, desc: "Permanently double click value." },
    { name: "Ascendant Cycle", cost: 10, owned: 0, desc: "Unlock auto prestige toggle." },
    { name: "Efficient Universe", cost: 15, owned: 0, desc: "5% cheaper upgrades." }
  ];

  // Achievements
  let achievements = [
    { name: "First Click", condition: () => count >= 1 },
    { name: "Ten Up", condition: () => count >= 10 },
    { name: "Triple Digits", condition: () => count >= 100 },
    { name: "1,000!", condition: () => count >= 1000 },
    { name: "Automation", condition: () => idleValue > 0 },
    { name: "5,000 Banked", condition: () => count >= 5000 },
    { name: "A Lot of Ones", condition: () => clickValue >= 11 },
    { name: "Money Money", condition: () => count >= 1000000 },
    { name: "Prestigious", condition: () => prestigeMultiplier > 1 },
    { name: "Starry Eyed", condition: () => stars > 0 },
    { name: "Collector", condition: () => shopUpgrades.some(u => u.owned > 0) },
    { name: "True Grinder", condition: () => count >= 1e9 }
  ];
  let unlockedAchievements = [];

  // ================= Game Functions =================
  function clickStar() {
    count += clickValue;
    checkAchievements();
    updateDisplay();
  }

  function buyUpgrade(index) {
    let u = upgrades[index];
    if (count >= u.cost) {
      count -= u.cost;
      u.amount++;
      if (u.type === "click") clickValue += u.value;
      if (u.type === "idle") idleValue += u.value;
      if (u.type === "burst") clickValue *= u.value;
      u.cost = Math.floor(u.cost * 2);
      renderUpgrades();
      updateDisplay();
    }
  }

  function tradeForStar() {
    let tradeCost = 50 * 1e12; // 50T
    if (count >= tradeCost) {
      count -= tradeCost;
      stars++;
      renderShop();
      checkAchievements();
      updateDisplay();
    }
  }

  function buyStarUpgrade(index) {
    let u = shopUpgrades[index];
    if (stars >= u.cost && u.owned === 0) {
      stars -= u.cost;
      u.owned = 1;
      if (u.name === "Celestial Clicks") clickValue *= 2;
      if (u.name === "Ascendant Cycle") {
        autoPrestigeUnlocked = true;
        renderAutoPrestigeToggle();
      }
      renderShop();
      checkAchievements();
      updateDisplay();
    }
  }

  function prestige() {
    prestigeMultiplier *= 2;
    count = 0;
    clickValue = 1;
    idleValue = 0;
    upgrades.forEach(u => {
      u.amount = 0;
      u.cost = u.baseCost;
    });
    renderUpgrades();
    checkAchievements();
    updateDisplay();
  }

  // ================= Achievements =================
  function checkAchievements() {
    achievements.forEach((a, i) => {
      if (!unlockedAchievements.includes(i) && a.condition()) {
        unlockedAchievements.push(i);
        renderAchievements();
      }
    });
  }

  function renderAchievements() {
    let html = "";
    achievements.forEach((a, i) => {
      html += `<div class="achievement ${unlockedAchievements.includes(i) ? "unlocked" : ""}">
        ${a.name}
      </div>`;
    });
    document.getElementById("achievementsList").innerHTML = html;
  }

  // ================= Auto Prestige =================
  function renderAutoPrestigeToggle() {
    if (autoPrestigeUnlocked) {
      document.getElementById("autoPrestigeToggle").innerHTML =
        `<p>Auto Prestige: 
        <button onclick="toggleAutoPrestige()" class="${autoPrestigeEnabled ? 'toggle-on' : 'toggle-off'}">
          ${autoPrestigeEnabled ? "ON" : "OFF"}
        </button></p>`;
    }
  }

  function toggleAutoPrestige() {
    autoPrestigeEnabled = !autoPrestigeEnabled;
    renderAutoPrestigeToggle();
  }

  // ================= Rendering =================
  function renderUpgrades() {
    let html = "";
    upgrades.forEach((u, i) => {
      html += `<div style="margin-bottom:10px;">
        <b>${u.name}</b> (Owned: ${u.amount})<br>
        <small>${u.desc}</small><br>
        ${formatNumber(u.cost)} <button onclick="buyUpgrade(${i})">Buy</button>
      </div>`;
    });
    document.getElementById("upgradeList").innerHTML = html;
  }

  function renderShop() {
    document.getElementById("starCount").innerText = "Stars: " + stars;
    let html = "";
    shopUpgrades.forEach((u, i) => {
      html += `<div style="margin-bottom:10px;">
        <b>${u.name}</b> (Owned: ${u.owned})<br>
        <small>${u.desc}</small><br>
        ${u.cost}⭐ <button onclick="buyStarUpgrade(${i})" ${u.owned ? "disabled" : ""}>Buy</button>
      </div>`;
    });
    document.getElementById("starUpgrades").innerHTML = html;
  }

  function updateDisplay() {
    document.getElementById("count").innerText = "Count: " + formatNumber(count);
    document.getElementById("stats").innerText =
      `Click Value: ${formatNumber(clickValue)} | Idle: ${formatNumber(idleValue)}/sec | Prestige Multiplier: ${formatNumber(prestigeMultiplier)}x`;
    renderShop();
    renderAutoPrestigeToggle();
    renderAchievements();
  }

  // ================= Game Loop =================
  setInterval(() => {
    count += idleValue;
    if (autoPrestigeEnabled && count >= 1e308) {
      prestige();
    }
    checkAchievements();
    updateDisplay();
  }, 1000);

  // ================= Save / Load =================
  function saveGame() {
    let save = {
      count, clickValue, idleValue, prestigeMultiplier,
      stars, upgrades, shopUpgrades,
      autoPrestigeUnlocked, autoPrestigeEnabled,
      unlockedAchievements
    };
    localStorage.setItem("starClickerSave", JSON.stringify(save));
  }

  function loadGame() {
    let save = JSON.parse(localStorage.getItem("starClickerSave"));
    if (save) {
      count = save.count;
      clickValue = save.clickValue;
      idleValue = save.idleValue;
      prestigeMultiplier = save.prestigeMultiplier;
      stars = save.stars || 0;
      upgrades = save.upgrades || upgrades;
      shopUpgrades = save.shopUpgrades || shopUpgrades;
      autoPrestigeUnlocked = save.autoPrestigeUnlocked || false;
      autoPrestigeEnabled = save.autoPrestigeEnabled || false;
      unlockedAchievements = save.unlockedAchievements || [];
    }
    renderUpgrades();
    renderShop();
    renderAutoPrestigeToggle();
    renderAchievements();
    updateDisplay();
  }

  function hardReset() {
    if (confirm("Are you sure? This will wipe everything!")) {
      localStorage.removeItem("starClickerSave");
      location.reload();
    }
  }

  // ================= Init =================
  loadGame();
  setInterval(saveGame, 10000);
</script>

</body>
</html>
